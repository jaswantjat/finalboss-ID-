# Railway Config as Code - Production ML Build
# Docs: https://docs.railway.com/reference/config-as-code

[build]
# Use Dockerfile for locked runtime environment
builder = "DOCKERFILE"

[deploy]
# Production deployment settings
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ALWAYS"

# Environment variables for stable ML behavior
[env]
# Tesseract configuration
TESSDATA_PREFIX = "/usr/share/tesseract-ocr/4.00/tessdata"
# Threading limits for stable server behavior
OMP_THREAD_LIMIT = "1"
UVICORN_WORKERS = "1"
# Python optimization
PYTHONUNBUFFERED = "1"
# Optional: Force rembg to use baked model
U2NET_PATH = "/root/.u2net/u2net.onnx"

